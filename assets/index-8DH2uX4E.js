import{i as j,o as I,u as b,a as w,j as e,B as y,Q as c,s as _}from"./index-B1BrVRdm.js";import{u as k}from"./userService-C3IonmR7.js";import{F as r,C}from"./index-YW99AOqC.js";import{I as p}from"./index-C-roE-KZ.js";import"./row-Dv3l5fA8.js";import"./index-CveXq9Df.js";const F="_description_18emd_12",N="_login_18emd_6",i={"login-root":"_login-root_18emd_6",description:F,login:N},B=j("user")(I(d=>{const{user:s}=d,m=b(),u=w(),f=o=>{let t=u.pathname;if(t==="/login"&&(t="/preview"),o.username==="admin"&&o.password==="123456"){let a={...o,token:"xxx"};localStorage.setItem("userInfo",c.stringify(a)),s==null||s.setUserInfo("admin","administrator"),m(t,{replace:!0})}else{const{username:a,password:h}=o;k.getAccessToken(a,h).then(n=>{const{token:x,info:l}=n;l.token=x,localStorage.setItem("userInfo",c.stringify(l)),s==null||s.setUserInfo(a,"administrator"),m(t,{replace:!0})}).catch(n=>_.error("登录失败"+n))}},g=o=>{console.log("Failed:",o)};return e.jsxs("div",{className:i["login-root"],children:[e.jsx("div",{className:i.description,children:"That's one small step for a man, one giant leap for mankind."}),e.jsxs(r,{name:"basic",className:i.login,labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:f,onFinishFailed:g,autoComplete:"off",children:[e.jsx(r.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:e.jsx(p,{})}),e.jsx(r.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:e.jsx(p.Password,{})}),e.jsx(r.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:e.jsx(C,{children:"Remember me"})}),e.jsx(r.Item,{wrapperCol:{offset:8,span:16},children:e.jsx(y,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})}));export{B as default};
