import{i as h,o as x,u as j,j as e,B as I,Q as l,s as b}from"./index-D_AjU-JN.js";import{u as w}from"./userService-BhHZ6vaw.js";import{F as o,C as y}from"./index-BzJcTtzL.js";import{I as c}from"./index-BsfdTQz2.js";import"./row-CacNKhnU.js";import"./index-BIEu2lds.js";const _="_description_18emd_12",k="_login_18emd_6",a={"login-root":"_login-root_18emd_6",description:_,login:k},T=h("user")(x(p=>{const{user:s}=p,i=j(),d=r=>{if(r.username==="admin"&&r.password==="123456"){let t={...r,token:"xxx"};localStorage.setItem("userInfo",l.stringify(t)),s==null||s.setUserInfo("admin","administrator"),i("/preview",{replace:!0})}else{const{username:t,password:f}=r;w.getAccessToken(t,f).then(n=>{const{token:g,info:m}=n;m.token=g,localStorage.setItem("userInfo",l.stringify(m)),s==null||s.setUserInfo(t,"administrator"),i("/preview",{replace:!0})}).catch(n=>b.error("登录失败"+n))}},u=r=>{console.log("Failed:",r)};return e.jsxs("div",{className:a["login-root"],children:[e.jsx("div",{className:a.description,children:"That's one small step for a man, one giant leap for mankind."}),e.jsxs(o,{name:"basic",className:a.login,labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:d,onFinishFailed:u,autoComplete:"off",children:[e.jsx(o.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:e.jsx(c,{})}),e.jsx(o.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:e.jsx(c.Password,{})}),e.jsx(o.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:e.jsx(y,{children:"Remember me"})}),e.jsx(o.Item,{wrapperCol:{offset:8,span:16},children:e.jsx(I,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})}));export{T as default};
