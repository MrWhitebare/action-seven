import{r,X as ce,j as X,n as U,l as K,m as de,I as ue,C as G,x as pe,f as q,c as T,b7 as ge,aw as me,u as fe,aQ as ve,a3 as Q,ag as he,G as be,b8 as ye}from"./index-CJqm67pM.js";import{u as Ce,r as Se,g as xe,P as Oe,a as Pe,b as $e,c as ze,T as we}from"./index-JXdsDeth.js";function Ee(){const[,e]=r.useReducer(n=>n+1,0);return e}function je(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=r.useRef({}),o=Ee(),t=Ce();return ce(()=>{const a=t.subscribe(i=>{n.current=i,e&&o()});return()=>t.unsubscribe(a)},[]),n.current}const V=r.createContext({}),Ne=e=>{const{antCls:n,componentCls:o,iconCls:t,avatarBg:a,avatarColor:i,containerSize:p,containerSizeLG:g,containerSizeSM:l,textFontSize:c,textFontSizeLG:d,textFontSizeSM:y,borderRadius:m,borderRadiusLG:u,borderRadiusSM:x,lineWidth:C,lineType:B}=e,s=(O,S,R)=>({width:O,height:O,borderRadius:"50%",[`&${o}-square`]:{borderRadius:R},[`&${o}-icon`]:{fontSize:S,[`> ${t}`]:{margin:0}}});return{[o]:Object.assign(Object.assign(Object.assign(Object.assign({},K(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:i,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:a,border:`${de(C)} ${B} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),s(p,c,m)),{"&-lg":Object.assign({},s(g,d,u)),"&-sm":Object.assign({},s(l,y,x)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Be=e=>{const{componentCls:n,groupBorderColor:o,groupOverlapping:t,groupSpace:a}=e;return{[`${n}-group`]:{display:"inline-flex",[n]:{borderColor:o},"> *:not(:first-child)":{marginInlineStart:t}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:a}}}},Re=e=>{const{controlHeight:n,controlHeightLG:o,controlHeightSM:t,fontSize:a,fontSizeLG:i,fontSizeXL:p,fontSizeHeading3:g,marginXS:l,marginXXS:c,colorBorderBg:d}=e;return{containerSize:n,containerSizeLG:o,containerSizeSM:t,textFontSize:Math.round((i+p)/2),textFontSizeLG:g,textFontSizeSM:a,groupSpace:c,groupOverlapping:-l,groupBorderColor:d}},Y=X("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:o}=e,t=U(e,{avatarBg:o,avatarColor:n});return[Ne(t),Be(t)]},Re);var ke=function(e,n){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(o[t[a]]=e[t[a]]);return o};const Ie=(e,n)=>{const[o,t]=r.useState(1),[a,i]=r.useState(!1),[p,g]=r.useState(!0),l=r.useRef(null),c=r.useRef(null),d=ue(n,l),{getPrefixCls:y,avatar:m}=r.useContext(G),u=r.useContext(V),x=()=>{if(!c.current||!l.current)return;const v=c.current.offsetWidth,h=l.current.offsetWidth;if(v!==0&&h!==0){const{gap:N=4}=e;N*2<h&&t(h-N*2<v?(h-N*2)/v:1)}};r.useEffect(()=>{i(!0)},[]),r.useEffect(()=>{g(!0),t(1)},[e.src]),r.useEffect(x,[e.gap]);const C=()=>{const{onError:v}=e;(v==null?void 0:v())!==!1&&g(!1)},{prefixCls:B,shape:s,size:O,src:S,srcSet:R,icon:w,className:W,rootClassName:A,alt:_,draggable:E,children:z,crossOrigin:k}=e,P=ke(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),f=pe(v=>{var h,N;return(N=(h=O??(u==null?void 0:u.size))!==null&&h!==void 0?h:v)!==null&&N!==void 0?N:"default"}),b=Object.keys(typeof f=="object"?f||{}:{}).some(v=>["xs","sm","md","lg","xl","xxl"].includes(v)),j=je(b),I=r.useMemo(()=>{if(typeof f!="object")return{};const v=Se.find(N=>j[N]),h=f[v];return h?{width:h,height:h,fontSize:h&&(w||z)?h/2:18}:{}},[j,f]),$=y("avatar",B),F=q($),[ne,oe,re]=Y($,F),ae=T({[`${$}-lg`]:f==="large",[`${$}-sm`]:f==="small"}),H=r.isValidElement(S),se=s||(u==null?void 0:u.shape)||"circle",ie=T($,ae,m==null?void 0:m.className,`${$}-${se}`,{[`${$}-image`]:H||S&&p,[`${$}-icon`]:!!w},re,F,W,A,oe),le=typeof f=="number"?{width:f,height:f,fontSize:w?f/2:18}:{};let M;if(typeof S=="string"&&p)M=r.createElement("img",{src:S,draggable:E,srcSet:R,onError:C,alt:_,crossOrigin:k});else if(H)M=S;else if(w)M=w;else if(a||o!==1){const v=`scale(${o})`,h={msTransform:v,WebkitTransform:v,transform:v};M=r.createElement(ge,{onResize:x},r.createElement("span",{className:`${$}-string`,ref:c,style:Object.assign({},h)},z))}else M=r.createElement("span",{className:`${$}-string`,style:{opacity:0},ref:c},z);return delete P.onError,delete P.gap,ne(r.createElement("span",Object.assign({},P,{style:Object.assign(Object.assign(Object.assign(Object.assign({},le),I),m==null?void 0:m.style),P.style),className:ie,ref:d}),M))},Z=r.forwardRef(Ie),L=e=>e?typeof e=="function"?e():e:null,Te=e=>{const{componentCls:n,popoverColor:o,titleMinWidth:t,fontWeightStrong:a,innerPadding:i,boxShadowSecondary:p,colorTextHeading:g,borderRadiusLG:l,zIndexPopup:c,titleMarginBottom:d,colorBgElevated:y,popoverBg:m,titleBorderBottom:u,innerContentPadding:x,titlePadding:C}=e;return[{[n]:Object.assign(Object.assign({},K(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:c,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":y,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${n}-content`]:{position:"relative"},[`${n}-inner`]:{backgroundColor:m,backgroundClip:"padding-box",borderRadius:l,boxShadow:p,padding:i},[`${n}-title`]:{minWidth:t,marginBottom:d,color:g,fontWeight:a,borderBottom:u,padding:C},[`${n}-inner-content`]:{color:o,padding:x}})},xe(e,"var(--antd-arrow-background-color)"),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${n}-content`]:{display:"inline-block"}}}]},_e=e=>{const{componentCls:n}=e;return{[n]:Oe.map(o=>{const t=e[`${o}6`];return{[`&${n}-${o}`]:{"--antd-arrow-background-color":t,[`${n}-inner`]:{backgroundColor:t},[`${n}-arrow`]:{background:"transparent"}}}})}},Me=e=>{const{lineWidth:n,controlHeight:o,fontHeight:t,padding:a,wireframe:i,zIndexPopupBase:p,borderRadiusLG:g,marginXS:l,lineType:c,colorSplit:d,paddingSM:y}=e,m=o-t,u=m/2,x=m/2-n,C=a;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:p+30},Pe(e)),$e({contentRadius:g,limitVerticalRadius:!0})),{innerPadding:i?0:12,titleMarginBottom:i?0:l,titlePadding:i?`${u}px ${C}px ${x}px`:0,titleBorderBottom:i?`${n}px ${c} ${d}`:"none",innerContentPadding:i?`${y}px ${C}px`:0})},J=X("Popover",e=>{const{colorBgElevated:n,colorText:o}=e,t=U(e,{popoverBg:n,popoverColor:o});return[Te(t),_e(t),me(t,"zoom-big")]},Me,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var We=function(e,n){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(o[t[a]]=e[t[a]]);return o};const ee=e=>{let{title:n,content:o,prefixCls:t}=e;return!n&&!o?null:r.createElement(r.Fragment,null,n&&r.createElement("div",{className:`${t}-title`},n),o&&r.createElement("div",{className:`${t}-inner-content`},o))},Ae=e=>{const{hashId:n,prefixCls:o,className:t,style:a,placement:i="top",title:p,content:g,children:l}=e,c=L(p),d=L(g),y=T(n,o,`${o}-pure`,`${o}-placement-${i}`,t);return r.createElement("div",{className:y,style:a},r.createElement("div",{className:`${o}-arrow`}),r.createElement(ze,Object.assign({},e,{className:n,prefixCls:o}),l||r.createElement(ee,{prefixCls:o,title:c,content:d})))},Le=e=>{const{prefixCls:n,className:o}=e,t=We(e,["prefixCls","className"]),{getPrefixCls:a}=r.useContext(G),i=a("popover",n),[p,g,l]=J(i);return p(r.createElement(Ae,Object.assign({},t,{prefixCls:i,hashId:g,className:T(o,l)})))};var Ge=function(e,n){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(o[t[a]]=e[t[a]]);return o};const Ve=r.forwardRef((e,n)=>{var o,t;const{prefixCls:a,title:i,content:p,overlayClassName:g,placement:l="top",trigger:c="hover",children:d,mouseEnterDelay:y=.1,mouseLeaveDelay:m=.1,onOpenChange:u,overlayStyle:x={}}=e,C=Ge(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:B}=r.useContext(G),s=B("popover",a),[O,S,R]=J(s),w=B(),W=T(g,S,R),[A,_]=fe(!1,{value:(o=e.open)!==null&&o!==void 0?o:e.visible,defaultValue:(t=e.defaultOpen)!==null&&t!==void 0?t:e.defaultVisible}),E=(b,j)=>{_(b,!0),u==null||u(b,j)},z=b=>{b.keyCode===he.ESC&&E(!1,b)},k=b=>{E(b)},P=L(i),f=L(p);return O(r.createElement(we,Object.assign({placement:l,trigger:c,mouseEnterDelay:y,mouseLeaveDelay:m,overlayStyle:x},C,{prefixCls:s,overlayClassName:W,ref:n,open:A,onOpenChange:k,overlay:P||f?r.createElement(ee,{prefixCls:s,title:P,content:f}):null,transitionName:ve(w,"zoom-big",C.transitionName),"data-popover-inject":!0}),Q(d,{onKeyDown:b=>{var j,I;r.isValidElement(d)&&((I=d==null?void 0:(j=d.props).onKeyDown)===null||I===void 0||I.call(j,b)),z(b)}})))}),te=Ve;te._InternalPanelDoNotUseOrYouWillBeFired=Le;const D=e=>{const{size:n,shape:o}=r.useContext(V),t=r.useMemo(()=>({size:e.size||n,shape:e.shape||o}),[e.size,e.shape,n,o]);return r.createElement(V.Provider,{value:t},e.children)},Fe=e=>{var n,o,t;const{getPrefixCls:a,direction:i}=r.useContext(G),{prefixCls:p,className:g,rootClassName:l,style:c,maxCount:d,maxStyle:y,size:m,shape:u,maxPopoverPlacement:x,maxPopoverTrigger:C,children:B,max:s}=e,O=a("avatar",p),S=`${O}-group`,R=q(O),[w,W,A]=Y(O,R),_=T(S,{[`${S}-rtl`]:i==="rtl"},A,R,g,l,W),E=be(B).map((P,f)=>Q(P,{key:`avatar-key-${f}`})),z=(s==null?void 0:s.count)||d,k=E.length;if(z&&z<k){const P=E.slice(0,z),f=E.slice(z,k),b=(s==null?void 0:s.style)||y,j=((n=s==null?void 0:s.popover)===null||n===void 0?void 0:n.trigger)||C||"hover",I=((o=s==null?void 0:s.popover)===null||o===void 0?void 0:o.placement)||x||"top",$=Object.assign(Object.assign({content:f},s==null?void 0:s.popover),{overlayClassName:T(`${S}-popover`,(t=s==null?void 0:s.popover)===null||t===void 0?void 0:t.overlayClassName),placement:I,trigger:j});return P.push(r.createElement(te,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},$),r.createElement(Z,{style:b},`+${k-z}`))),w(r.createElement(D,{shape:u,size:m},r.createElement("div",{className:_,style:c},P)))}return w(r.createElement(D,{shape:u,size:m},r.createElement("div",{className:_,style:c},E)))},He=Z;He.Group=Fe;function Ue(e,n){return r.useState(function(){return ye(e(),n,{autoBind:!0})})[0]}export{He as A,Le as P,te as a,je as b,L as g,Ue as u};
